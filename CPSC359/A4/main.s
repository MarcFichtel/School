.section    .init
.globl     _start

_start:
    b       main

.section .text

//////////////////////////////////////////////////////////////////////
// Main
//////////////////////////////////////////////////////////////////////

main:
    	MOV     sp, #0x8000 	// Initialize stack pointer
	BL	EnableJTAG 	// Enable JTAG
	BL	InitFrameBuffer // Initialize display: 1024x768
	BL 	ClearScreen 	// Clear the screen

	// Draw start text
	MOV 	r0, #420 	
	MOV 	r1, #384
	LDR 	r2, =start_s
	BL 	DrawString	// DrawString(X, Y, string_address)

	// Draw a white square with size 40 at origin
	MOV 	r0, #200
	MOV 	r1, #200
	MOV 	r2, #40
	MOV 	r3, #0xFFFFFFFF
	BL 		DrawSquare

	// Draw BG
	MOV 	r0, #0
	MOV 	r1, #0
	BL 		DrawBG 	// DrawBackground()


	// Draw floor
	//MOV 	r5, #0
//floorLoop:
	//MOV 	r0, r5
	//MOV 	r1, #728
	//LDR 	r2, =brick_1
	//BL 		DrawImage 	// DrawImage(X, Y, image_address)
	//ADD 	r5, #40
	//CMP 	r5, #990
	//Ble 	floorLoop

haltLoop$:
	B	haltLoop$

/////////////////////////////////////////////////////////////////////
// Data Section
///////////////////////////////////////////////////////////////////////////

.section .data

.align 4
font:	.incbin	"font.bin" 	// The font map
start_s: .asciz "Press START" 	// String: Start

brick_1: 
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0"
	.ascii "\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0"
	.ascii "\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"
	.ascii "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\0\0\0\0\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\0\0\0\0\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\0\0\0\0\302a"
	.ascii "\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a\302a"
	.ascii "\302a\302a\302a\302a\302a"
